<header class="p-3 text-bg-dark">
  <div class="container">
    <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
      <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
        <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"></use></svg>
      </a>

      <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
        <li><a href="#" class="nav-link px-2 text-white" (click)="onOpenModal(null,'add')" >add employee</a></li>
      </ul>

      <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" role="search">
        <input type="search" (ngModelChange)="searchEmployees(key.value)" #key="ngModel" ngModel [ngModelOptions]="{standalone: true}"
        class="form-control form-control-dark text-bg-dark" placeholder="Search..." aria-label="Search">
      </form>
    </div>
  </div>
</header>
<div>
  <router-outlet></router-outlet>
</div>
<div class="container" id="main-container">
    <div class="row">
      <div *ngFor= "let employee of employees"  class="col-md-6 col-xl-3">
            <div class="card m-b-30">
                <div class="card-body row">
                    <div class="col-6">
                        <a href=""><img src="{{employee?.imageUrl}}" alt="" class="img-fluid rounded-circle w-60"></a>
                    </div>
                    <div class="col-6 card-title align-self-center mb-0">
                        <h5>{{employee?.name}}</h5>
                        <p class="m-0">{{employee?.jobTitle}}</p>
                    </div>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><i class="fa fa-envelope float-right"></i>Email : <a href="#">{{employee?.email}}</a></li>
                    <li class="list-group-item"><i class="fa fa-phone float-right"></i>Phone : {{employee?.phone}}</li>
                </ul>
                <div class="card-body">
                    <div class="float-right btn-group btn-group-sm">
                        <a (click)="onOpenModal(employee,'edit')"class="btn btn-primary tooltips" data-placement="top" data-toggle="tooltip" data-original-title="Edit"><i class="fa fa-pencil"></i> </a>
                        <a (click)="onOpenModal(employee,'delete')" class="btn btn-secondary tooltips" data-placement="top" data-toggle="tooltip" data-original-title="Delete"><i class="fa fa-times"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="addEmployeeModal" tabindex="-1" aria-labelledby="addEmployeeModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
<!-- Code by w3codegenerator.com -->
<form #addForm="ngForm" (ngSubmit)="onAddEmployee(addForm)">
  <div class="form-group">
    <label for="name">First name:</label>
    <input class="form-control" type="text" ngModel id="name" name="name" placeholder="John" required>
  </div>
  <div class="form-group">
    <label for="email">Email:</label>
    <input class="form-control" type="email" ngModel id="email" name="email" placeholder="youremail@gmail.com" required>
  </div>
  <div class="form-group">
    <label for="jobTitle">job Title:</label>
    <input class="form-control" type="text" ngModel id="jobTitle" name="jobTitle" placeholder="Developer" required>
  </div>

  <div class="form-group">
    <label for="imageUrl">image URL:</label>
    <input class="form-control" type="text" ngModel id="imageUrl" name="imageUrl" placeholder="url">
  </div>
  <div class="form-group">
    <label for="phone">phone:</label>
    <input class="form-control" type="text" ngModel id="phone" name="phone" placeholder="123-456-779">
  </div>
  <div class="modal-footer">
    <button type="button" id="add-employee-form" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    <button [disabled]="addForm.invalid" type="submit" class="btn btn-primary">Save changes</button>
  </div>

  </form>
      </div>

    </div>
  </div>
</div>

<div class="modal fade" id="editEmployeeModal" tabindex="-1" aria-labelledby="editEmployeeModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Edit employee {{editEmployee?.name}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Code by w3codegenerator.com -->
        <form #editform="ngForm">
          <div class="form-group">
            <label for="name">First name:</label>
            <input class="form-control" type="text" ngModel="{{editEmployee?.name}}" id="name" name="name" placeholder="John" required>
          </div>
          <input type="hidden" ngModel="{{editEmployee?.id}}"  name="id" id="id" >
          <input type="hidden" ngModel="{{editEmployee?.employeeCode}}"  name="userCode" id="userCode" >
          <div class="form-group">
            <label for="email">Email:</label>
            <input class="form-control" type="email" ngModel="{{editEmployee?.email}}"  id="email" name="email" placeholder="youremail@gmail.com" required>
          </div>
          <div class="form-group">
            <label for="jobTitle">job Title:</label>
            <input class="form-control" type="text" ngModel="{{editEmployee?.jobTitle}}"  id="jobTitle" name="jobTitle" placeholder="Developer" required>
          </div>

          <div class="form-group">
            <label for="imageUrl">image URL:</label>
            <input class="form-control" type="text" ngModel="{{editEmployee?.imageUrl}}"  id="imageUrl" name="imageUrl" placeholder="url">
          </div>
          <div class="form-group">
            <label for="phone">phone:</label>
            <input class="form-control" type="text" ngModel="{{editEmployee?.phone}}"  id="phone" name="phone" placeholder="123-456-779">
          </div>
          <div class="modal-footer">
            <button type="button" id="edit-employee-form" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button (click)="onUpdateEmployee(editform.value)" type="submit" class="btn btn-primary">Save changes</button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="deleteEmployeeModal" tabindex="-1" aria-labelledby="deleteEmployeeModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Borrar empleado</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Â¿Desea borrar al empleado {{deleteEmployee?.name}}?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button (click)=" onDeleteEmployee(deleteEmployee?.id)" class="btn btn-danger">Delete</button>
      </div>
    </div>
  </div>
</div>

<!--No employees-->
<div *ngIf="employees?.length==0" class="col-lg-12 col-md-12 col -xl-12">
  <div class="alert alert-info" role="alert">
    <h4 class="alert-heading">No Employees!</h4>
    <p>No employees was found</p>
  </div>
</div>
